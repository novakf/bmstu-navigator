{"version":3,"file":"static/js/499.d45bcacc.chunk.js","mappings":"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","sources":["svgedit/editor/extensions/ext-storage/ext-storage.js","svgedit/editor/extensions/ext-storage/storageDialog.html","svgedit/editor/extensions/ext-storage/storageDialog.js"],"sourcesContent":["/**\n * @file ext-storage.js\n *\n * This extension allows automatic saving of the SVG canvas contents upon\n *  page unload (which can later be automatically retrieved upon future\n *  editor loads).\n *\n *  The functionality was originally part of the SVG Editor, but moved to a\n *  separate extension to make the setting behavior optional, and adapted\n *  to inform the user of its setting of local data.\n *\n * @license MIT\n *\n * @copyright 2010 Brett Zamir\n * @todo Revisit on whether to use `svgEditor.pref` over directly setting\n * `curConfig` in all extensions for a more public API (not only for `extPath`\n * and `imagePath`, but other currently used config in the extensions)\n * @todo We might provide control of storage settings through the UI besides the\n *   initial (or URL-forced) dialog. *\n */\nimport './storageDialog.js'\n\n/**\n * Expire the storage cookie.\n * @returns {void}\n */\nconst removeStoragePrefCookie = () => {\n  expireCookie('svgeditstore')\n}\n/**\n * Set the cookie to expire.\n * @param {string} cookie\n * @returns {void}\n */\nconst expireCookie = cookie => {\n  document.cookie =\n    encodeURIComponent(cookie) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT'\n}\n\n/**\n * Replace `storagePrompt` parameter within URL.\n * @param {string} val\n * @returns {void}\n * @todo Replace the string manipulation with `searchParams.set`\n */\nconst replaceStoragePrompt = val => {\n  val = val ? 'storagePrompt=' + val : ''\n  const loc = top.location // Allow this to work with the embedded editor as well\n  if (loc.href.includes('storagePrompt=')) {\n    loc.href = loc.href.replace(/([&?])storagePrompt=[^&]*(&?)/, function (\n      n0,\n      n1,\n      amp\n    ) {\n      return (val ? n1 : '') + val + (!val && amp ? n1 : amp || '')\n    })\n  } else {\n    loc.href += (loc.href.includes('?') ? '&' : '?') + val\n  }\n}\n\nexport default {\n  name: 'storage',\n  init () {\n    const svgEditor = this\n    const { svgCanvas, storage } = svgEditor\n\n    // We could empty any already-set data for users when they decline storage,\n    //  but it would be a risk for users who wanted to store but accidentally\n    // said \"no\"; instead, we'll let those who already set it, delete it themselves;\n    // to change, set the \"emptyStorageOnDecline\" config setting to true\n    // in svgedit-config-iife.js/svgedit-config-es.js.\n    const {\n      // When the code in svg-editor.js prevents local storage on load per\n      //  user request, we also prevent storing on unload here so as to\n      //  avoid third-party sites making XSRF requests or providing links\n      // which would cause the user's local storage not to load and then\n      // upon page unload (such as the user closing the window), the storage\n      //  would thereby be set with an empty value, erasing any of the\n      // user's prior work. To change this behavior so that no use of storage\n      // or adding of new storage takes place regardless of settings, set\n      // the \"noStorageOnLoad\" config setting to true in svgedit-config-*.js.\n      noStorageOnLoad,\n      forceStorage,\n      canvasName\n    } = svgEditor.configObj.curConfig\n\n    // LOAD STORAGE CONTENT IF ANY\n    if (\n      storage && // Cookies do not have enough available memory to hold large documents\n      (forceStorage ||\n        (!noStorageOnLoad &&\n          /(?:^|;\\s*)svgeditstore=prefsAndContent/.test(document.cookie)))\n    ) {\n      const key = 'svgedit-' + canvasName\n      const cached = storage.getItem(key)\n      if (cached) {\n        svgEditor.loadFromString(cached)\n        const name = storage.getItem(`title-${key}`) ?? 'untitled.svg'\n        svgEditor.topPanel.updateTitle(name)\n        svgEditor.layersPanel.populateLayers()\n      }\n    }\n\n    // storageDialog added to DOM\n    const storageBox = document.createElement('se-storage-dialog')\n    storageBox.setAttribute('id', 'se-storage-dialog')\n    svgEditor.$container.append(storageBox)\n    storageBox.init(svgEditor.i18next)\n\n    // manage the change in the storageDialog\n\n    storageBox.addEventListener('change', e => {\n      storageBox.setAttribute('dialog', 'close')\n      if (e?.detail?.trigger === 'ok') {\n        if (e?.detail?.select !== 'noPrefsOrContent') {\n          const storagePrompt = new URL(top.location).searchParams.get(\n            'storagePrompt'\n          )\n          document.cookie =\n            'svgeditstore=' +\n            encodeURIComponent(e.detail.select) +\n            '; expires=Fri, 31 Dec 9999 23:59:59 GMT'\n          if (storagePrompt === 'true' && e?.detail?.checkbox) {\n            replaceStoragePrompt()\n            return\n          }\n        } else {\n          removeStoragePrefCookie()\n          if (\n            svgEditor.configObj.curConfig.emptyStorageOnDecline &&\n            e?.detail?.checkbox\n          ) {\n            setSvgContentStorage('')\n            Object.keys(svgEditor.curPrefs).forEach(name => {\n              name = 'svg-edit-' + name\n              if (svgEditor.storage) {\n                svgEditor.storage.removeItem(name)\n              }\n              expireCookie(name)\n            })\n          }\n          if (e?.detail?.select && e?.detail?.checkbox) {\n            replaceStoragePrompt('false')\n            return\n          }\n        }\n      } else if (e?.detail?.trigger === 'cancel') {\n        removeStoragePrefCookie()\n      }\n      setupBeforeUnloadListener()\n      svgEditor.storagePromptState = 'closed'\n      svgEditor.updateCanvas(true)\n    })\n\n    /**\n     * Sets SVG content as a string with \"svgedit-\" and the current\n     *   canvas name as namespace.\n     * @param {string} svgString\n     * @returns {void}\n     */\n    const setSvgContentStorage = svgString => {\n      const name = `svgedit-${svgEditor.configObj.curConfig.canvasName}`\n      if (!svgString) {\n        storage.removeItem(name)\n        storage.removeItem(`${name}-title`)\n      } else {\n        storage.setItem(name, svgString)\n        storage.setItem(`title-${name}`, svgEditor.title)\n      }\n    }\n\n    /**\n     * Listen for unloading: If and only if opted in by the user, set the content\n     *   document and preferences into storage:\n     * 1. Prevent save warnings (since we're automatically saving unsaved\n     *       content into storage)\n     * 2. Use localStorage to set SVG contents (potentially too large to allow in cookies)\n     * 3. Use localStorage (where available) or cookies to set preferences.\n     * @returns {void}\n     */\n    const setupBeforeUnloadListener = () => {\n      window.addEventListener('beforeunload', function () {\n        // Don't save anything unless the user opted in to storage\n        if (\n          !/(?:^|;\\s*)svgeditstore=(?:prefsAndContent|prefsOnly)/.test(\n            document.cookie\n          )\n        ) {\n          return\n        }\n        if (/(?:^|;\\s*)svgeditstore=prefsAndContent/.test(document.cookie)) {\n          setSvgContentStorage(svgCanvas.getSvgString())\n        }\n\n        svgEditor.setConfig({ no_save_warning: true }) // No need for explicit saving at all once storage is on\n\n        const { curPrefs } = svgEditor.configObj\n\n        Object.entries(curPrefs).forEach(([key, val]) => {\n          const store = val !== undefined\n          key = 'svg-edit-' + key\n          if (!store) {\n            return\n          }\n          if (storage) {\n            storage.setItem(key, val)\n          } else if (window.widget) {\n            window.widget.setPreferenceForKey(val, key)\n          } else {\n            val = encodeURIComponent(val)\n            document.cookie =\n              encodeURIComponent(key) +\n              '=' +\n              val +\n              '; expires=Fri, 31 Dec 9999 23:59:59 GMT'\n          }\n        })\n      })\n    }\n\n    let loaded = false\n    return {\n      name: 'storage',\n      callback () {\n        const storagePrompt = new URL(top.location).searchParams.get(\n          'storagePrompt'\n        )\n        // No need to run this one-time dialog again just because the user\n        //   changes the language\n        if (loaded) {\n          return\n        }\n        loaded = true\n\n        // Note that the following can load even if \"noStorageOnLoad\" is\n        //   set to false; to avoid any chance of storage, avoid this\n        //   extension! (and to avoid using any prior storage, set the\n        //   config option \"noStorageOnLoad\" to true).\n        if (\n          !forceStorage &&\n          // If the URL has been explicitly set to always prompt the\n          //  user (e.g., so one can be pointed to a URL where one\n          // can alter one's settings, say to prevent future storage)...\n          (storagePrompt === 'true' ||\n            // ...or...if the URL at least doesn't explicitly prevent a\n            //  storage prompt (as we use for users who\n            // don't want to set cookies at all but who don't want\n            // continual prompts about it)...\n            (storagePrompt !== 'false' &&\n              // ...and this user hasn't previously indicated a desire for storage\n              !/(?:^|;\\s*)svgeditstore=(?:prefsAndContent|prefsOnly)/.test(\n                document.cookie\n              )))\n          // ...then show the storage prompt.\n        ) {\n          const options = Boolean(storage)\n          // Open select-with-checkbox dialog\n          // From svg-editor.js\n          svgEditor.storagePromptState = 'waiting'\n          const $storageDialog = document.getElementById('se-storage-dialog')\n          $storageDialog.setAttribute('dialog', 'open')\n          $storageDialog.setAttribute('storage', options)\n        } else if (!noStorageOnLoad || forceStorage) {\n          setupBeforeUnloadListener()\n        }\n      }\n    }\n  }\n}\n","// Module\nvar code = \"<style>#dialog_content{margin:10px 10px 5px 10px;background:#ddd;overflow:auto;text-align:left;border:1px solid #5a6162}#dialog_content label,#dialog_content p,#dialog_content select{margin:10px;line-height:1.3em}#dialog_container{font-family:Verdana;text-align:center;left:50%;top:50%;max-width:440px;z-index:50001;background:#5a6162;border:1px outset #777;font-family:Verdana,Helvetica,sans-serif;font-size:.8em}#dialog_container,#dialog_content{border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px}#dialog_buttons input[type=text]{width:90%;display:block;margin:0 0 5px 11px}#dialog_buttons input[type=button]{margin:0 1em}</style> <elix-dialog id=\\\"dialog_box\\\" aria-label=\\\"SVG-Edit storage preferences\\\" closed> <div class=\\\"overlay\\\"></div> <div id=\\\"dialog_container\\\"> <div id=\\\"dialog_content\\\"> <p id=\\\"notificationNote\\\"> </p> <select id=\\\"se-storage-pref\\\"> <option value=\\\"prefsAndContent\\\" id=\\\"prefsAndContent\\\"></option> <option value=\\\"prefsOnly\\\" id=\\\"prefsOnly\\\"></option> <option value=\\\"noPrefsOrContent\\\" id=\\\"noPrefsOrContent\\\"></option> </select> <label title=\\\"\\\" id=\\\"se-remember-title\\\"> <input type=\\\"checkbox\\\" id=\\\"se-remember\\\" value=\\\"\\\" checked=\\\"checked\\\"> </label> </div> <div id=\\\"dialog_buttons\\\"> <button id=\\\"storage_ok\\\"></button> <button id=\\\"storage_cancel\\\"></button> </div> </div> </elix-dialog>\";\n// Exports\nexport default code;","/* globals svgEditor */\nimport storageDialogHTML from './storageDialog.html'\n\nconst template = document.createElement('template')\ntemplate.innerHTML = storageDialogHTML\n/**\n * @class SeStorageDialog\n */\nexport class SeStorageDialog extends HTMLElement {\n  /**\n    * @function constructor\n    */\n  constructor () {\n    super()\n    // create the shadowDom and insert the template\n    this._shadowRoot = this.attachShadow({ mode: 'open' })\n    this._shadowRoot.append(template.content.cloneNode(true))\n    this.$dialog = this._shadowRoot.querySelector('#dialog_box')\n    this.$storage = this._shadowRoot.querySelector('#js-storage')\n    this.$okBtn = this._shadowRoot.querySelector('#storage_ok')\n    this.$cancelBtn = this._shadowRoot.querySelector('#storage_cancel')\n    this.$storageInput = this._shadowRoot.querySelector('#se-storage-pref')\n    this.$rememberInput = this._shadowRoot.querySelector('#se-remember')\n  }\n\n  /**\n   * @function init\n   * @param {any} name\n   * @returns {void}\n   */\n  init (i18next) {\n    this.setAttribute('common-ok', i18next.t('common.ok'))\n    this.setAttribute('common-cancel', i18next.t('common.cancel'))\n    this.setAttribute('notify-editor_pref_msg', i18next.t('notification.editorPreferencesMsg'))\n    this.setAttribute('properties-prefs_and_content', i18next.t('properties.prefs_and_content'))\n    this.setAttribute('properties-prefs_only', i18next.t('properties.prefs_only'))\n    this.setAttribute('properties-no_prefs_or_content', i18next.t('properties.no_prefs_or_content'))\n    this.setAttribute('tools-remember_this_choice', i18next.t('tools.remember_this_choice'))\n    this.setAttribute('tools-remember_this_choice_title', i18next.t('tools.remember_this_choice_title'))\n  }\n\n  /**\n   * @function observedAttributes\n   * @returns {any} observed\n   */\n  static get observedAttributes () {\n    return ['dialog', 'storage', 'common-ok', 'common-cancel', 'notify-editor_pref_msg', 'properties-prefs_and_content', 'tools-remember_this_choice', 'tools-remember_this_choice_title', 'properties-prefs_only', 'properties-no_prefs_or_content']\n  }\n\n  /**\n   * @function attributeChangedCallback\n   * @param {string} name\n   * @param {string} oldValue\n   * @param {string} newValue\n   * @returns {void}\n   */\n  attributeChangedCallback (name, oldValue, newValue) {\n    let node\n    switch (name) {\n      case 'dialog':\n        if (newValue === 'open') {\n          this.$dialog.open()\n        } else {\n          this.$dialog.close()\n        }\n        break\n      case 'storage':\n        if (newValue === 'true') {\n          this.$storageInput.options[0].disabled = false\n        } else {\n          this.$storageInput.options[0].disabled = true\n        }\n        break\n      case 'common-ok':\n        this.$okBtn.textContent = newValue\n        break\n      case 'common-cancel':\n        this.$cancelBtn.textContent = newValue\n        break\n      case 'notify-editor_pref_msg':\n        node = this._shadowRoot.querySelector('#notificationNote')\n        node.textContent = newValue\n        break\n      case 'properties-prefs_and_content':\n        node = this._shadowRoot.querySelector('#prefsAndContent')\n        node.textContent = newValue\n        break\n      case 'properties-prefs_only':\n        node = this._shadowRoot.querySelector('#prefsOnly')\n        node.textContent = newValue\n        break\n      case 'properties-no_prefs_or_content':\n        node = this._shadowRoot.querySelector('#noPrefsOrContent')\n        node.textContent = newValue\n        break\n      case 'tools-remember_this_choice':\n        node = this._shadowRoot.querySelector('#se-remember-title')\n        node.prepend(newValue)\n        break\n      case 'tools-remember_this_choice_title':\n        node = this._shadowRoot.querySelector('#se-remember-title')\n        node.setAttribute('title', newValue)\n        break\n      default:\n        // super.attributeChangedCallback(name, oldValue, newValue);\n        break\n    }\n  }\n\n  /**\n   * @function get\n   * @returns {any}\n   */\n  get dialog () {\n    return this.getAttribute('dialog')\n  }\n\n  /**\n   * @function set\n   * @returns {void}\n   */\n  set dialog (value) {\n    this.setAttribute('dialog', value)\n  }\n\n  /**\n   * @function connectedCallback\n   * @returns {void}\n   */\n  connectedCallback () {\n    const onSubmitHandler = (e, action) => {\n      const triggerEvent = new CustomEvent('change',\n        {\n          detail: {\n            trigger: action,\n            select: this.$storageInput.value,\n            checkbox: this.$rememberInput.checked\n          }\n        })\n      this.dispatchEvent(triggerEvent)\n    }\n    svgEditor.$click(this.$okBtn, (evt) => onSubmitHandler(evt, 'ok'))\n    svgEditor.$click(this.$cancelBtn, (evt) => onSubmitHandler(evt, 'cancel'))\n  }\n}\n\n// Register\ncustomElements.define('se-storage-dialog', SeStorageDialog)\n"],"names":["removeStoragePrefCookie","expireCookie","cookie","document","encodeURIComponent","replaceStoragePrompt","val","loc","top","location","href","includes","replace","n0","n1","amp","name","init","svgEditor","this","svgCanvas","storage","noStorageOnLoad","forceStorage","canvasName","configObj","curConfig","test","key","cached","getItem","_storage$getItem","loadFromString","concat","topPanel","updateTitle","layersPanel","populateLayers","storageBox","createElement","setAttribute","$container","append","i18next","addEventListener","e","_e$detail","_e$detail7","_e$detail2","detail","trigger","select","_e$detail3","storagePrompt","URL","searchParams","get","checkbox","_e$detail4","_e$detail5","_e$detail6","emptyStorageOnDecline","setSvgContentStorage","Object","keys","curPrefs","forEach","removeItem","setupBeforeUnloadListener","storagePromptState","updateCanvas","svgString","setItem","title","window","getSvgString","setConfig","no_save_warning","entries","_ref","undefined","widget","setPreferenceForKey","loaded","callback","options","Boolean","$storageDialog","getElementById","template","innerHTML","SeStorageDialog","HTMLElement","constructor","super","_shadowRoot","attachShadow","mode","content","cloneNode","$dialog","querySelector","$storage","$okBtn","$cancelBtn","$storageInput","$rememberInput","t","observedAttributes","attributeChangedCallback","oldValue","newValue","node","open","close","disabled","textContent","prepend","dialog","getAttribute","value","connectedCallback","onSubmitHandler","action","triggerEvent","CustomEvent","checked","dispatchEvent","$click","evt","customElements","define"],"sourceRoot":""}