/*! For license information please see 5361.0d899606.chunk.js.LICENSE.txt */
(self.webpackChunkbmstu_navigator=self.webpackChunkbmstu_navigator||[]).push([[5361],{5361:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const o="grid",i={name:o,async init(){const e=this;await async function(e){let t;const i=e.configObj.pref("lang");try{t=await n(8172)("./".concat(i,".js"))}catch(a){console.warn("Missing translation (".concat(i,") for ").concat(o," - using 'en'")),t=await n.e(7504).then(n.bind(n,7504))}e.i18next.addResourceBundle(i,o,t.default)}(e);const{svgCanvas:t}=e,{$id:i,$click:a,NS:s}=t,r=i("svgcanvas").ownerDocument,{assignAttributes:c}=t,d=document.createElement("canvas"),l=i("canvasBackground"),g=t.getTypeMap(),h=[.01,.1,1,10,100,1e3];let p=e.configObj.curConfig.showGrid||!1;d.style.display="none",e.$svgEditor.appendChild(d);const u=r.createElementNS(s.SVG,"svg");c(u,{id:"canvasGrid",width:"100%",height:"100%",x:0,y:0,overflow:"visible",display:"none"}),l.appendChild(u);const v=r.createElementNS(s.SVG,"defs"),b=r.createElementNS(s.SVG,"pattern");c(b,{id:"gridpattern",patternUnits:"userSpaceOnUse",x:0,y:0,width:100,height:100});const m=r.createElementNS(s.SVG,"image");c(m,{x:0,y:0,width:100,height:100}),b.append(m),v.append(b),i("canvasGrid").appendChild(v);const f=r.createElementNS(s.SVG,"rect");c(f,{width:"100%",height:"100%",x:0,y:0,"stroke-width":0,stroke:"none",fill:"url(#gridpattern)",style:"pointer-events: none; display:visible;"}),i("canvasGrid").appendChild(f);const w=n=>{const o=g[e.configObj.curConfig.baseUnit]*n,i=100/o;let a=1;h.some((e=>(a=e,i<=e)));const s=a*o;d.width=s,d.height=s;const r=d.getContext("2d"),c=.5,l=s/10;r.globalAlpha=.2,r.strokeStyle=e.configObj.curConfig.gridColor;for(let e=1;e<10;e++){const t=Math.round(l*e)+.5,n=0;r.moveTo(t,s),r.lineTo(t,n),r.moveTo(s,t),r.lineTo(n,t)}r.stroke(),r.beginPath(),r.globalAlpha=.5,r.moveTo(c,s),r.lineTo(c,0),r.moveTo(s,c),r.lineTo(0,c),r.stroke();const p=d.toDataURL("image/png");m.setAttribute("width",s),m.setAttribute("height",s),m.parentNode.setAttribute("width",s),m.parentNode.setAttribute("height",s),t.setHref(m,p)},y=()=>{p&&w(t.getZoom()),i("canvasGrid").style.display=p?"block":"none",i("view_grid").pressed=p};return{name:e.i18next.t("".concat(o,":name")),zoomChanged(e){p&&w(e)},callback(){const t=document.createElement("template"),n="".concat(o,":buttons.0.title");t.innerHTML='\n          <se-button id="view_grid" title="'.concat(n,'" src="grid.svg"></se-button>\n        '),i("editor_panel").append(t.content.cloneNode(!0)),a(i("view_grid"),(()=>{e.configObj.curConfig.showGrid=p=!p,y()})),p&&y()}}}}},8172:(e,t,n)=>{var o={"./en.js":[7504,7504],"./fr.js":[5604,5604],"./sv.js":[7350,7350],"./tr.js":[5214,5214],"./uk.js":[1668,1668],"./zh-CN.js":[7148,7148]};function i(e){if(!n.o(o,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(o),i.id=8172,e.exports=i}}]);
//# sourceMappingURL=5361.0d899606.chunk.js.map